groups:
  - name: DemoAlerts
    rules:
      - alert: InstanceDown
        expr: up{job="services"} < 1
        for: 10s

      - alert: CPU Load
        expr: avg without (mode,cpu) (1 - rate(node_cpu_seconds_total{mode="idle"}[1m])) > 0
        for: 10s
        labels:
          severity: page
        annotations:
          summary: "high CPU load"
          description: "{{ $labels.instance }} CPU load is {{humanize $value}}"

      - alert: Used Memory
        expr: sum(node_memory_MemTotal_bytes) by (instance) / 1024^3 - sum(node_memory_MemFree_bytes) by (instance) / 1024^3 < 3
        for: 30s
